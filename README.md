# Kingdoms Calculator (キングダム スコア計算機)

ボードゲーム「Kingdoms（キングダム）」のスコア計算およびシミュレーションを行うWebアプリケーションです。
プレイヤーは城やタイルを自由に配置し、複雑な特殊タイルの効果を含めたスコアをリアルタイムで確認できます。

## 🎮 機能概要

- **インタラクティブな盤面**: 5行×6列のグリッドにクリックで配置可能。
- **リアルタイムスコア計算**: 配置するたびに即座に全プレイヤーの得点を更新。
- **各種コンポーネント**:
  - **城**: 4色 (赤・青・緑・黄色)、ランク1〜4。
  - **資源/ハザード**: +1〜+6, -1〜-6。
  - **特殊タイル**: 山、ドラゴン、金鉱、魔法使い。
- **アクションログ**: 操作履歴の表示。

## ⚙️ ルールとロジック仕様

本アプリでは、以下の優先順位と仕様に基づいて得点計算が行われます。

### 優先順位 (Priority)
**山 (Mountain) > ドラゴン (Dragon) > 金鉱 (Gold Mine) = 魔法使い (Wizard)**

### 特殊タイルの詳細仕様

1.  **山 (Mountain 🏔️)**
    *   行または列を分断します。山によって隔てられた区画（セグメント）は、互いに影響を与えません。
    *   最も高い優先度を持ちます。

2.  **ドラゴン (Dragon 🐉)**
    *   同じセグメント（行または列）にドラゴンが存在する場合、そのセグメント内の**資源タイル（プラス点）の価値は `0` になります**。
    *   **重要**: タイルの実質的な価値は、そのタイルが属する「行」と「列」の両方の状況を見て決定されます。
        *   例: ある資源タイルが「行」にドラゴンがいなくても、「列」にドラゴンがいれば、そのタイルの価値は0になります。
    *   ハザードタイル（マイナス点）には影響しません。

3.  **金鉱 (Gold Mine ⛏️)**
    *   同じセグメント（行または列）に金鉱が存在する場合、そのセグメント内の**資源・ハザードタイルの価値は `2倍` になります**。
    *   ドラゴンと金鉱が同時に影響する場合、ドラゴンの効果（0にする）が先に適用されます（0 × 2 = 0）。

4.  **魔法使い (Wizard 🧙)**
    *   魔法使いに隣接（上下左右）する城のランクを `+1` します。

## 🛠️ 技術スタック

- **Frontend**: React (TypeScript)
- **Styling**: Tailwind CSS
- **Bundler**: (Environment dependent, compatible with Vite/CRA)

## 🚀 使い方

1.  **ツールの選択**:
    *   画面右側のパネルから配置したい「タイル」または「城」を選択します。
    *   削除したい場合は「Eraser」を選択します。
2.  **配置**:
    *   画面中央のボード上のマスをクリックして配置します。
3.  **確認**:
    *   画面左側のスコアボードで計算結果を確認します。
    *   盤面上のタイルには、計算後の「実質値」が表示される場合があります（例: ドラゴンで0になった場合は赤字で0表示）。

## 📂 ディレクトリ構成

```
/
├── index.html
├── index.tsx       # エントリーポイント
├── App.tsx         # メインレイアウト (3カラム構成)
├── types.ts        # 型定義
├── constants.ts    # 定数・設定値
├── utils/
│   └── scoring.ts  # スコア計算ロジック (行・列の相互作用解決)
└── components/
    ├── Board.tsx       # 盤面表示
    ├── Controls.tsx    # ツール選択パネル
    ├── ScoreBoard.tsx  # スコア表示
    └── ActionLog.tsx   # ログ表示
```
